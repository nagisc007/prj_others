# -*- coding: utf-8 -*-
"""Story: chapter 3 'Buster goblins'
"""
import os
import sys
sys.path.append(os.path.join(os.path.dirname(__file__), '../..'))
sys.path.append('storybuilder')

from storybuilder.builder import world as wd
from src.yunow import config as cnf
THM = cnf.THEMES

# titles
TITLE = [
        "Re:Re:Re:教会なう",# NOTE: 四度目教会、最初からGPS使ってモンスターから距離取りつつ森を抜ける
        "ゴーゴンマップなう",# NOTE: スマフマップ使うで
        "村なう",
        "宿ゲットなう",# NOTE: 隣町、宿の主人から色々聞くことに
        "宿屋なう",
        "キャンセルなう",
        "村長なう",
        "ゴブリンに捕まったなう",# NOTE:初クエスト
        "ゴブリンの巣なう",
        "洞窟なう",# NOTE:洞窟内で
        "野営なう",# NOTE:野宿編１から
        ]

# scenes
## ep25 scenes
def sc_churchagain4(w: wd.World):
    h = yusha = w.yusha
    sol, mako = w.sol, w.mako
    pri = w.priest1
    return w.scene("４度目の教会",
            h.be(w.stage.church1, w.day.awake4),
            yusha.talk("溺れる！"),
            h.look("思わず出た大声にびっくりして",
                "$Sは起き上がった"),
            h.deal("よく見れば教会の礼拝堂の長椅子の上で",
                "彼は横たえられている"),
            pri.talk("おや。", "お目覚めのようですね"),
            h.look("声は$n_priest1神父だった。",
                "彼は宣誓台に肘をついて分厚い本を開いている。",
                "そこには数々の精霊の言葉が書かれているらしいが",
                "精霊文字を読むことのできない$Sにとっては模様を見せられているみたいなものだった"),
            yusha.talk("あの", "神父さまは昨夜旅から帰ってきたところですか？"),
            pri.talk("そう話したはずだよね？",
                "それともまだ眠いのですか？"),
            h.think("やはり戻っていた。", "これで四度目になる。",
                "何故いつも教会で目覚めるのか分からないが",
                "とにかく死んでしまうとどうやら教会に戻るという不可思議な現象が起こるらしい"),
            h.look("$Sは慌てて隣に置いてあったズタ袋から$phoneを取り出し",
                "自分の過去の呟きを確認してみる。",
                "そこには冒険に出かけるまでのものは残っていたが",
                "森に入る前に見た景色と共に呟いたものや$n_goblinの大群に囲まれた時のものが一切消え去っていた"),
            yusha.talk("神父さま。",
                "ちょっとおかしなこと訊いてもいいですか？"),
            pri.talk("何でしょう？"),
            yusha.talk("人間は死んだらどうなるんですか？"),
            h.look("その質問に明らかに顔色を変えた神父だったが",
                "しばらく思案した後で重々しく口を開くと", "まずこう言った"),
            pri.talk("どなたか大切な方が亡くなったのですか？"),
            yusha.talk("いえ。", "ちょっと$me自身が死んだだけなんですけど",
                "どういう訳かいつも教会で目覚めるんですよ"),
            h.deal("$n_priest1神父は首を捻り", "真顔になって$Sを見ている"),
            yusha.talk("いや、ひょっとすると人間って死んでも死なないで人生やり直せるのかなって思って。",
                "まあ別に今こうして生きてるみたいだからいいんですけど"),
            h.look("笑いながらそう言った彼に", "神父はゆっくりと首を横に振る"),
            pri.talk("何があったかは分かりませんが",
                "$n_yushaさん。",
                "あなたは何度か夢を見たのでしょう。",
                "それは精霊神様が見せた仮初《かりそめ》の人生なのかも知れません。",
                "もし間違っていたと感じたなら",
                "今ある生を大切にして下さいね。",
                "きっとそういうメッセージをあなたに伝えたかったのだと思いますよ"),
            h.look("いつも以上に優しい表情と声音で神父は彼に語りかけたが",
                "$Sの方は何を言われたのか意味が理解できなかったらしい"),
            yusha.talk("分かりました。",
                "とにかくまた世話になった時は宜しくお願いします"),
            h.deal("それだけ言うと",
                "彼はズタ袋を担いで立ち上がる。",
                "$phoneを手にしたまま歩き出すと",
                "それを待ち構えていたかのように教会の入り口に赤髪の長身の男性とピンクのおかっぱ頭の少女が姿を見せた"),
            sol.talk("いつまで祈ってんだよ、$yusha？"),
            mako.talk("$taro", "早く出発しないと今日中に$st_town2に着けませんよ？"),
            )

def sc_avoidgoblin(w: wd.World):
    h = yusha = w.yusha
    sol, mako = w.sol, w.mako
    return w.scene("ゴブリン回避",
            h.be(w.stage.homefield),
            h.deal("無事に城下町を出た$Sと$sol", "$n_makoの三人は",
                "地図を手に北にある町$st_town2を目指して街道を歩いていた"),
            h.look("遠くには$st_homemountの稜線が見え", "相変わらず$Sはその光景を$phoneに収めつつも「なう」と呟いている"),
            sol.talk("おい$yusha。", "何度言ったら分かるんだ？",
                "そんなもんすぐに見慣れちまうからいい加減にやめて", "先に行くぞっつってるだろ？"),
            h.deal("何度も立ち止まる$Sを見かねて$solが注意する"),
            yusha.talk("いやいや", "これは大事な記録なんだよ。",
                "何かあった時の為の大事な保険なんだから少しくらい大目に見てくれよ"),
            sol.talk("なーに訳の分からねえこと言ってんだよ。",
                "ともかくこの先の森はモンスターが潜んでるだろうから",
                "そんな風に油断してたらすぐやられちまうからな"),
            h.deal("旅の先輩風を吹かせた$solに", "しかし$Sは含み笑いを返す"),
            sol.talk("何だよ？"),
            yusha.talk("コレを見るが良い！"),
            h.look("そう言うと$Sは自分の$phoneを二人に見せた。",
                "そこには『$karebasho』というアプリが表示されていて",
                "森の方には既に赤い点がいくつかあるのが確認できた"),
            sol.talk("な、何だよコレは？"),
            mako.talk("$taro", "$karebasho知ってたんですか？"),
            h.deal("驚く二人に満足そうに頷くと",
                "以前$n_makoから聞いた説明をそのまま二人に伝えた"),
            sol.talk("え？", "じゃあコレ使えばモンスターがどこに潜んでるとか全部分かんのか？",
                "何だよその便利道具は！"),
            yusha.talk("見れば分かるけど", "森には$n_goblinが大挙して待ち構えてるんだ。",
                "だからいっそのこと", "$meらはここを通らないという選択をするべきだと思うんだ"),
            h.deal("自分を注目している二人に対して",
                "これこそリーダーだという提案をした$Sだったが、"),
            sol.talk("ここ通らないでどうやって$st_town2に行くつもりなんだ？"),
            mako.talk("最短がこの街道通りに森を抜けるコースなんですけど",
                "それ以外っていうともう山越えしかなくなりますよ？",
                "けどそんなことしてたら何日かかるでしょうかね……"),
            h.look("四度目の教会での目覚めの時からずっと考えていた案だったのに",
                "即座に否定されてしまう。",
                "しかしもう一度$Sは地図をよく見る。",
                "本当に迂回路は山越えしかないのだろうか"),
            yusha.talk("なあ。", "ココ。",
                "一旦西側の川を渡ってから", "この$st_town3って村を経由すればいいんじゃないのか？"),
            h.look("確かに川を挟んだ西側に小さく$st_town3村と書かれている"),
            mako.talk("でも橋の記載がないから川を渡れるかどうか分かりませんよ？"),
            h.look("彼女の指摘通りなのだが", "$Sは今一度あの$n_goblinの群れと一戦交えるつもりは毛頭なかった"),
            yusha.talk("とにかく行ってみればいいじゃないか。",
                "それこそ歩いて渡れるかも知れないし"),
            sol.talk("そんなちっぽけな川ならわざわざ地図には書かねえよ。",
                "けどそのアプリとかってのが本当なら", "確かに森にはモンスターの大群がいる訳だし……どうよお嬢"),
            h.deal("どうやら$solも$Sの意見に賛成してくれそうだが",
                "$n_makoの方は渋い表情のままだ"),
            mako.talk("まあ、$meは$taroとずっと一緒にいられればそれでいいんで……構いませんよ？"),
            yusha.talk("よし！", "決まりだ！"),
            h.think("とにかくこれで$n_goblin死は防げる"),
            h.deal("そう考えて笑みを漏らした$Sは", "意気揚々と街道を逸れて西に進路を取った"),
            h.deal("何も考えていない$solと不安を浮かべる$n_makoもその後に続いたが",
                    "その後を追うもう一つの影には誰も気づいていなかった"),
            )

## ep26 scenes
def sc_vanishriver(w: wd.World):
    h = yusha = w.yusha
    sol, mako = w.sol, w.mako
    return w.scene("消え去った川",
            h.be(w.stage.river1, w.day.awake4),
            h.look("$Sたち一行は街道を逸れて地図上に描かれていた$st_river1という",
                "$st_homeregionの西側を南北に蛇行しながら流れている川があるはずの場所へとやってきたのだが",
                "三人は誰もが口を開けたまま", "その場で固まっていた"),
            yusha.talk("川なんてなかった"),
            sol.talk("いや待てよ！", "これでも最新の地図を手に入れてきたんだぞ？",
                "こんなに力強く描かれている川がそう簡単に消えると思うか？"),
            h.look("渡れるんだからいいじゃないか",
                "といつになく楽観的な$Sに対して", "そのそそり立つ赤髪を掻き毟りながら$solが「おかしいだろ！」と文句をつける"),
            sol.talk("こういう明らかに大きな変化があった時ってのはな",
                "近くに危険が迫っていることが多いんだよ！",
                "噴火するとか地面に穴が開くとか",
                "見たこともないようなモンスターが悪さしてるとか",
                "ほんとシャレになんねんだって！"),
            h.deal("何か相当嫌なことでも経験したのだろう。",
                "$Sはああだこうだと力説する$solの顔に$phoneを向けると、"),
            yusha.talk("マジギレなう"),
            h.deal("と呟いて彼の表情を切り取った"),
            sol.talk("ちょ", "おま！", "何してんだよ？"),
            h.look("$phoneに表示される$solの真剣な表情と「マジギレなう」には",
                "次々と反応のコメントが寄せられる。",
                "大半が嘲笑の類だったが", "中には「イケメンちゃう？」というよく分からないものも含まれていた"),
            yusha.talk("$sol大人気じゃん"),
            sol.talk("お？", "これって人気あるってこと？"),
            h.look("次々と増えていく数字に気を良くした彼に「そんなとこ」と答えた$Sを",
                "事情を知る$n_makoは目を細くして見た"),
            mako.talk("それでどうします？", "渡れるから", "渡っちゃいますか？"),
            h.look("彼女は川が流れていたと思われる大きな溝に足を一歩踏み出してみたが",
                "何かトラップが仕掛けられている様子はない。",
                "川底だったらしい場所に立つと", "振り返って二人を見た"),
            yusha.talk("そりゃあ渡るしかないでしょ？",
                "$sol君はどうするのかなー？"),
            sol.talk("渡るよ！", "渡ればいいんだろがよ、こんちくしょう！"),
            h.deal("思い切り不満をぶちまけて渋面になった$solより先に", "$Sが川底に飛び降りる。",
                "少し湿り気があったが魚が横たわっているようなこともないし",
                "一体どういう事情で川の水が引いてしまったのだろう。",
                "考えても分かりそうにはなかったので気にせず$Sは対岸に向かって歩き出した"),
            h.deal("$solも後に続いたが", "何だかおっかなびっくりな足取りだ"),
            h.look("先に渡り切った$n_makoは自分の$phoneを見ながら何かしている。",
                "何度も顔を上げては$phoneと地形を見比べているようだ"),
            yusha.talk("どうかしたの、$mako？"),
            h.deal("土手を登ってきた$Sが声を掛けながら近寄ると",
                "彼女は「見て下さい」と自分の$phoneを見せた"),
            h.look("そこには地図が映し出されている。",
                "それも手書きしたよりもずっと精巧な図面だ。",
                "鳥になって上空から俯瞰するとこういう風に描けるかも知れない。",
                "それはもう地図というよりも天空から見下ろした大地の絵そのもので",
                "その地図上では$st_river1は姿を消していた"),
            )

def sc_gogonmap(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    return w.scene("マップアプリだ",
            yusha.talk("これ何？"),
            mako.talk("$gmapですよ？", "知りません？"),
            h.deal("初めて耳にするものだった。",
                "$Sは土手を上ってきた$solにも訊いてみたが", "$phoneを持たない彼が知るはずもない。",
                "首を横に振られただけだった"),
            mako.talk("$gmapというのはですね",
                "空から見た地形をそのまま地図にして$phoneさえあればどこからでもそれが利用できるという",
                "地図アプリなんです。",
                "目的地を選べばその経路も図示してくれるし", "わざわざ地図を買わなくてもいいってことで",
                "みんなコレを使っているんですよ"),
            h.deal("$phoneを使いこなしている彼女に二人は驚きの表情を見せる"),
            yusha.talk("$phoneって何でもできるんだな……"),
            mako.talk("何でもはできませんよ。", "アプリがあるだけ"),
            h.look("そう答えて", "けれど少し得意げな顔を$Sに見せた"),
            sol.talk("でもよぉ", "この何とかップってのだと$st_town2近郊の森がごっそり無いんだが"),
            h.look("$solに言われて見てみると", "確かにあの$n_goblinの森が姿を消している。",
                "森がないというよりは森があった場所が全部砂漠に書き換えられているといった方が正しい"),
            sol.talk("やっぱこの地図おかしいんじゃね？"),
            mako.talk("データが古いのかな……"),
            h.deal("$n_makoは何度か$phoneを操作してみたが首を捻るばかりでやはり森は砂漠のままらしい"),
            yusha.talk("だけど川は実際なかったし", "こっちの地図の方が合ってるんじゃないの？"),
            h.deal("$Sは言う"),
            h.think("ただそこにはどうせもうあの森を抜けないから別にどっちでもいい",
                "という単純な思いしかなかった"),
            mako.talk("そうですね。",
                "$gmapが合っているとするとこの先に集落がありますよ。",
                "$st_town3という名前の村みたいですけど",
                "寄ってみますか？"),
            h.deal("示された地図を見ながら$Sは眉根を寄せて考え込む。",
                "距離的には村に立ち寄ると$st_town2に日が落ちるまでに到着するのが難しくなりそうだ"),
            yusha.talk("この$st_town3を二人は知ってるの？"),
            mako.talk("いいえ"),
            sol.talk("$meも聞いたことがないな。", "新しく出来た村ってこともないだろうが"),
            h.think("$Sは旅立つ前にこっそりと$phoneで調べてみた『冒険の心得』について思い出す。",
                "そこには確か『町の住民の話によく耳を傾けること』という項目があった。",
                "人々の何気ない話の中に重要な旅のヒントが隠されているらしい。",
                "そもそも旅にヒントが必要なのかどうかもよく分からないが",
                "ここはその心得というものに従うことにした"),
            yusha.talk("よし。", "それじゃあ$st_town3に寄ってみて",
                "日が暮れそうならそこで宿を取ろう"),
            h.deal("二人とも$Sの決断に反論はないらしく",
                "それぞれ頷くと彼に続いて歩き出した"),
            h.think("$Sは二人には黙っていたが",
                "実は可能なら野営をしたくなかった。",
                "テントや寝袋があったとしても夜といえば虫に悩まされるし",
                "何より雨や嵐になったらどうするんだ。",
                "やはり雨風を凌ぎ", "体調を整えておく為にも宿の利用は大事だろう"),
            h.think("それに外泊という響きに何ともいえない冒険感を唆られるのだ。",
                "$Sもまだ十六の少年。", "魔王退治よりもやりたいことが沢山ある年頃なのであった"),
            w.tag.symbol("◆"),
            h.deal("だがそんな彼らの後をこっそりと付いて歩く一つの影があった"),
            h.look("その人物は耳が隠れる程度の金髪を揺らしながらニヤリと笑う。",
                    "特徴的な八重歯が光り", "彼女の切れ長の瞳が楽しげに歪んだ"),
            h.deal("彼女は首に黄色いスカーフを巻きつけた軽装で", "足音もなく", "かつて$st_river1だった場所を渡ったのだった"),
            )

## ep27 scenes
def sc_vila(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    return w.scene("村にやってきた",
            h.be(w.stage.town3, w.day.awake4),
            h.look("粗末な木の柵とアーチを前に",
                "$Sである少年は慎重にその一歩を踏み出した"),
            yusha.talk("はじめての", "村なう！",
                "$st_town3なう！"),
            h.deal("彼は自分に$phoneを向けて",
                "最近覚えた$i_selphyという技を繰り返す"),
            sol.talk("自分の間抜け面を$phoneに載っけて何が面白いんだか"),
            h.deal("村なう", "村人なう", "村幼女なう――"),
            h.look("などと一人で楽しそうに盛り上がる$Sを見て",
                "赤髪の長身の男$solは溜息をつきながら両掌を見せる"),
            mako.talk("いいじゃないですか。",
                "$taroもこの冒険を楽しまれているってことですし。",
                "$meは$taroさえ良ければ", "魔王退治とかよりもこうやって観光旅行するだけで満足ですよ"),
            h.look("そう言ってはしゃぐ$Sを嬉しそうに見つめるのは",
                "小柄なピンクのおかっぱ頭の少女$n_makoである。",
                "彼女も自分の$phoneを彼に向けながら",
                "こっそりとその様子を画像に収めていた"),
            sol.talk("あのよぉ",
                "一度訊いてみたかったんだけど",
                "お嬢ってあいつのどこが気に入ったんだ？"),
            mako.talk("え……"),
            sol.talk("いやだってどう見たってアレがイケメンだとは思わんだろう！？"),
            h.deal("$Sはクワを担いだおじさんを捕まえて何か大声で話しかけている。",
                "おじさんは困惑しているが", "よく分からないままに$Sと横並びになると$i_selphyされていた"),
            mako.talk("べ、別に$taroがイケメンだったから惚れたとか",
                "そういうんじゃありません。",
                "あの方は", "あなたなんかには分からないとても大切なものを心に持っているんです"),
            sol.talk("アレが？", "ホントに？"),
            h.deal("ついに普通に自分を$i_selphyするだけでは満足できなくなったようで",
                "舌を鼻につけたり", "顎を歪めてみたりと",
                "変な顔をして$i_selphyし始めたので",
                "見かねた$solは駆けていって思い切り右拳を叩き込んだ"),
            yusha.talk("何すんだよ！", "いきなり殴ったら痛いだろ？"),
            sol.talk("もう気が済んだろ？",
                "いい加減", "魔王やモンスターについて訊いて回るぞ。",
                "それに川のことも気になる"),
            h.deal("脳天を押さえながら$solを睨む$Sは「わかったよ」と答えると",
                "仕方なく$phoneを肩から下げたズタ袋に仕舞い",
                "先に歩き出した$solについていく"),
            h.move("その後に$n_makoも続いたが",
                "何か気配を感じて振り返った"),
            h.look("けれど村の入り口のアーチがあるだけで",
                "誰もいない。",
                "空は雲が多く浮かんでいたが", "まだこれから太陽が高くなるところだった"),
            )

def sc_strangerumor(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man = w.vilaman1
    return w.scene("妙な噂話",
            man.talk("あんたら何言ってんだ？"),
            h.deal("$Sたちは共用井戸の近くで木工細工の露店を出していた男に魔王や魔王軍について訊いていた"),
            yusha.talk("知らないんですか？",
                "今この世界が魔王とその軍勢によって恐怖で支配されようとしているんですよ？"),
            h.deal("彼は自分が$Sであることは隠しつつも今の世界情勢について簡単に説明したのだが",
                "男は「魔王って何だ？」と", "どうも要領を得ない"),
            sol.talk("いくら街道から外れた村だからって流石に魔王知らないとかないだろ？"),
            h.deal("自称山奥生まれの$solがその長身で迫るが",
                "露店の男の方は肩を怒らせて「知らねえよ」と不機嫌になるだけだ"),
            mako.talk("他の人たちにも訊いてみましょうよ"),
            h.deal("放っておくと$solが手を出し兼ねないと感じたのか",
                "$n_makoが間に入って収めると",
                "三人は手分けして「魔王」について知る村人を探した"),
            h.think("魔王", "という言葉を耳にしたことがない。",
                "そんな人間がこの世界に存在するとは思わなかったのだが",
                "手当たり次第に「魔王知ってますか？」「魔王恐いですよね？」「魔王来たらどうします？」等と尋ねて回ったが",
                "誰もが、"),
            man.talk("魔王？", "そんな名前の人は知らないねえ"),
            h.deal("という反応を返した"),
            h.deal("村の北外れの墓地の前に集まった三人はそれぞれの成果を報告し合ったが、"),
            sol.talk("魔王しらねえってよ"),
            mako.talk("$me、こんな場所初めてです"),
            yusha.talk("モンスターすら見たことないって言われたよ……"),
            h.deal("三人揃って大きな溜息を零した"),
            sol.talk("ひょっとして魔王ってそんな有名じゃないんじゃないのか？"),
            yusha.talk("そんなことないだろ？",
                "だってあの日", "空が真っ黒になって稲光が何本も落ちたあの時さ",
                "みんな魔王の声を聞いたんだろ？",
                "これから世界は魔王とその配下のものになるってさ。",
                "うちの母さんなんかその日から十日も寝込んでたくらいなんだぞ？",
                "それがまるで夢だったみたいに魔王なんて知らないなんて",
                "どう考えてもおかしいだろ？"),
            h.think("$Sは今でも夢に見るその光景を思い出していた"),
            h.think("それは世界中の都市で同時に発生したと言われている。",
                "その後各国が何度も会議を重ね", "調査や研究をし",
                "何とか魔王軍と渡り合っているのが現状だと", "$Sたちには伝えられていた"),
            sol.talk("$meもそれは聞いたよ。",
                "だからこそこうして山を降りて騎士団に入ろうと思ったんだ。",
                "まあ、良い仕事がなかったてのもあるけど"),
            mako.talk("$meだって同じですよ。",
                "それにほら", "コレを見て下さいよ"),
            h.deal("$n_makoは二人に自分の$phoneを見せた。",
                "そこには彼女の「魔王を知らない人ハケーン」という呟きに対して驚きや嘲笑の反応が羅列されていた"),
            mako.talk("ね？", "この通りですから", "たぶんこの村の人たちがちょっとおかしいだけなんだと思いますよ"),
            h.look("彼女の$phoneの上ではどんどんとコメントが流れていく。",
                "それをじっと見ながら$Sは何か違和感を覚えていた"),
            mako.talk("ねえ$taro。",
                "こんな村のことは放っておいて", "水などの補給をしたらさっさと$st_town2に向かいませんか？",
                "そうしないと日が暮れるまでに間に合いませんよ？"),
            sol.talk("そうだぞ$yusha。", "世界は広いんだ。",
                    "中には一つくらい魔王のことを知らない村だってあるだろってことよ"),
            h.look("二人の意見に曖昧な頷きを返しながら",
                    "$Sは今一度この村を眺めやる"),
            h.look("道も整備されてない地道で",
                    "木や布を組み合わせて作った簡素な家が多い。",
                    "着ているものは袖口の縫製すらしてなくて",
                    "中には素足で歩いている人もいる。",
                    "自分が今まで暮らしてきた$st_homeregion城下町の様子とは何もかもが違って見えた"),
            h.look("ただ違うのはそれだけではなく",
                    "村の人々の表情がどことなく明るいのだ。",
                    "魔王を知らない", "ということがひょっとするとその明るさの原因なのかも知れない"),
            h.think("そんなことを思いついて",
                    "$Sは二人に言った"),
            yusha.talk("ちょっとこの村のことを調べてみたくなった"),
            sol.talk("ハァ！？"),
            mako.talk("何言ってるんですか$taro！？"),
            h.deal("驚いた二人を「まあまあ」と手で制して$Sは自分の$phoneを見る"),
            yusha.talk("旅の心得……気になったらとことん調べるべし。",
                    "という訳で", "なーんか気になるんだわ", "ここ"),
            h.look("二人はそれぞれに懐疑的な目を$Sへと向けたが、"),
            sol.talk("ま、別にここに一泊したからって魔王退治できない訳でもないしな"),
            mako.talk("$meは$taroについていくだけですから"),
            h.deal("それぞれに承諾してくれた"),
            yusha.talk("よーし。", "それじゃあまずは今夜の宿を確保しよう"),
            h.deal("笑顔でそう言った$Sに「仕方ないなあ」という苦笑を二人は浮かべたのだった"),
            )

## ep28 scenes
def sc_vilainn(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru = w.vilaman1, w.uru
    return w.scene("村の宿屋にて",
            h.be(w.stage.town3, w.day.awake4),
            h.deal("$st_town3村にやってきた$Sたち三人であったが",
                "何故か村人の誰もが「魔王」を知らないと言う。",
                "妙に思った$Sはこの村を少し調べてみようと言い出したのだった"),
            yusha.talk("けどホントに誰も魔王を知らないんだな"),
            h.think("再度", "一通り目に付いた村人に「魔王」のことを訊いて回ったが",
                "やはりそんなものは知らないという返答が得られただけに終わった"),
            sol.talk("まあ$meだって本当に魔王がいるのかって言われたら",
                "そりゃあ実際この目で見てみないことには何とも言えねぇって思うけどさ"),
            h.move("宿を探して歩きながら赤髪の長身の男$solは$Sに言う"),
            mako.talk("でもここは魔王だけじゃなくて",
                "モンスターのことについても特別困っている風なことを言ってませんでしたよね？"),
            h.deal("その疑問を口にしたのはピンクのおかっぱ頭をした$n_makoだ。",
                "先程から$Sの左腕を取り", "一緒に歩いている。",
                "彼はそれを少し邪魔そうに見ながらも", "彼女の意見に同意した"),
            yusha.talk("王様からも言われたんだよな。",
                "$Sである$meには特別な力があるはずだから",
                "行く先々で困っている人たちの力になってやって欲しいって。",
                "それがやがては魔王やその軍勢を追い払う力になるだろうってね"),
            h.deal("そもそも魔王退治と言ってみたところで",
                "この世界の誰もその魔王の居場所どころか", "存在を目にした者はいないと云われている。",
                "仮に居場所が分かったところでそこに辿り着けるかどうかも怪しいのだが",
                "探し出さないことには永遠に魔王の脅威は消えて失くならない"),
            yusha.talk("ひょっとしたら本当に魔王なんていなくて",
                "みんなそれなりに平和に暮らしているのかも知れない……なんてことを確認する旅ってのもいいかなって",
                "今ちょっと思った"),
            h.look("そう言った$Sが見ていたのは自分の$phoneだった。",
                "特殊な鉱石で造られたその板状のアイテムは同じものを持つ者ならどんな場所にいても",
                "文章や画像のやり取りができるという優れものなのだが",
                "彼がフォローしている世界中の人たちの楽しそうな呟きを見て",
                "ついそんなことを考えてしまったのだった"),
            sol.talk("$meは別に魔王がいてもいなくてもどっちでもいいけどよぉ",
                "さっきからずっと同じところを歩いてる気がしてならないんだが？"),
            h.deal("$solはそれぞれの$phoneを見ている$Sと$n_makoの肩を掴んで",
                "ずっと感じていた疑問を口にする"),
            sol.talk("この村ってどこ見ても宿らしきもんがねぇ気がするんだけど",
                "$meの気の所為か？"),
            yusha.talk("お？", "やっぱ$solもそう思ってた？",
                "いや実は$meもそうなんじゃないかって薄々思いつつも",
                "見逃してるだけなんじゃないかなーって思おうとしてたとこなんだよ"),
            h.look("そもそも看板を出している店がない。",
                "共用井戸がある広場を中心として十字に広がっていたが",
                "どの通り沿いにも宿どころか食堂や居酒屋といった飲み食いできそうな場所すら見当たらない。",
                "辛うじて露店として野菜や魚、燻製肉などが売られていたが",
                "それぞれの家の傍には小さな畑があり", "わざわざ買うようなこともないのかも知れない"),
            sol.talk("食べ物はそうかもしれねえが",
                "包丁や鍋", "斧や鍬に金槌", "そういった生活用品まで自給自足なのか？",
                "$meの故郷の村にだって流石にそういう店くらいあったぞ"),
            mako.talk("$meも思ってたんです。",
                "ここって何だか現代の村じゃないみたいで"),
            h.deal("$n_makoは自分の$phoneを操作しながら", "眉間に皺を寄せている"),
            mako.talk("あ！", "ちょっとコレ見て下さいよ"),
            h.deal("彼女は何か見つけたようで",
                    "二人に自分の$phoneを見せた"),
            sol.talk("何だよ。", "別に普通の町並みじゃねえか"),
            h.look("それを目にした$solはそう言ったが",
                    "じっくりとその画像を眺めていた$Sは奥歯にものが挟まったような感覚に気づいた"),
            yusha.talk("これ……$st_town3て書いてある"),
            mako.talk("そうなんですよ。",
                    "たまたま画像検索で引っかかったんですけど"),
            sol.talk("なんだその画像ケンタってのは？"),
            h.deal("$phoneを持たない$solは知らなかった。",
                    "検索と言って$phoneで投稿された星の数ほどの文章や画像から目的のものを探し出して表示することができるという",
                    "ある意味恐ろしい機能があることを"),
            mako.talk("$taroは分かりますよね？"),
            h.deal("頭にハテナを浮かべている$solを放って彼女は$Sに訊いた"),
            yusha.talk("これっていつの$st_town3村なの？"),
            h.look("今彼らが目にしている村の様子とは全然違っていた。",
                    "$phoneに映し出されていたのはもっと近代的な石や煉瓦を積み上げた家が並び",
                    "何より歩いている人も$st_homeregionの城下町で見かけるような縫製のしっかりとした服を着ている。",
                    "通りには看板を出している店も並び", "焼き立てのパンを食べながら歩いている人も映っていた"),
            yusha.talk("コレってこの画像が間違ってるってこと？"),
            mako.talk("$meにもよく分かりません。", "ひょっとすると他にも$st_town3っていう場所があるのかもです"),
            h.look("色々な疑問が頭の中で大合唱を始めて", "$Sは思わず「わからん」と声に出して髪の毛を掻き毟った"),
            uru.ask("何かお困りですかな……旅の方"),
            sol.talk("何だよ婆さん？"),
            h.deal("道の中央で立ち止まっていたから", "見知らぬ老婆が声を掛けてきた。",
                    "髪の毛が隠れるフード付きの外套を着ていたが",
                    "大きな鷲鼻が目立つ皺の多い顔は少し不気味にも映る"),
            yusha.talk("実は宿を取りたいんですが", "この村には宿がないみたいなんで"),
            h.deal("$Sが気にせずそう答えると",
                    "喉の奥を鳴らて笑い", "老婆は「なら良かった」と口にした"),
            uru.talk("看板こそ出しておりませぬが", "うちで旅人に宿を提供しております。",
                    "良ければいらっしゃいませんか"),
            h.deal("その言葉に$Sは$phoneを手にして、"),
            yusha.talk("宿ゲットなう"),
            h.deal("と呟いた"),
            )

## ep29 scenes
def sc_takeainn(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru = w.vilaman1, w.uru
    return w.scene("勇者宿をとる",
            h.be(w.stage.town3, w.day.awake4),
            h.deal("宿。",
                "それは初めて冒険の旅に出た者たちにとっては何とも甘美な響きとして",
                "幾多の戦いと過酷な道のりに疲弊した体に一時の休息を得られる至福の場所",
                "のはずだ"),
            yusha.talk("お、おう……"),
            h.look("$Sである少年はあばら屋と呼んでも差し支えない見事な木と布の集合作品を見て",
                "言葉にならない声を漏らす"),
            sol.talk("婆さん。", "ここって雨漏りとか大丈夫なんだよな？"),
            h.look("軽く風が抜けただけでキィと柱になっている細い木が軋む。",
                "天板は全然張られていない。", "テント宜しく大きな布が括り付けてあるのが見えて",
                "赤髪の長身の戦士$solは案内してきた老婆に尋ねた"),
            uru.talk("$meは雨漏りは経験したことないから大丈夫だと思いますがね"),
            h.look("明らかに壁に穴が開いているのを見ながら老婆はそう言う。",
                "$Sの隣でそれを見ながら小さく苦笑したのはピンクのおかっぱ頭の$n_makoだ。",
                "彼女は証拠を残しておこうとその様子を自分の$phoneで記録している"),
            uru.talk("ささ", "どうぞ中にお入りになって宿帳に必要事項を書き込んで下さいて"),
            yusha.talk("それじゃあ", "お邪魔します"),
            h.deal("緊張気味に薄い木の板で出来た戸を潜る$Sに続き", "$solと$n_makoも中に入る。",
                "最後に老婆が入ったが", "戸を閉めた素振りもないのに戸は自動で閉じられたことを誰も気づかなかった"),
            w.tag.br(),
            yusha.talk("えーと", "$n_yushaでいいな"),
            h.deal("宿帳に名前と住所を書き込んだ$Sは", "老婆に案内され", "大きな布で仕切られた奥の部屋に移動する"),
            h.look("窓が小さい為か薄暗く", "天井は確かに布が覆っているだけだ。",
                "それでも低い木組みのベッドが四つ", "部屋の左右に並べられ", "ゆっくり眠るくらいのことはできそうだった"),
            yusha.talk("ところで店主。", "ご飯は付いてないの？"),
            h.deal("ではごゆっくり", "と立ち去ろうとした老婆を$Sは呼び止める"),
            yusha.talk("別に無くてもいいけど", "どうせなら$st_town3の特産とか地元食材を使った名物メニューとかあれば",
                "それを食ってみたいなあ", "なんて"),
            sol.talk("おい$yusha。",
                "旅行してんじゃねえんだから", "行く先々でいちいち特産品とか食べるんじゃねえ。",
                "だいたいそんな金持ってねえだろ？"),
            h.deal("大きな溜息と共に肩を上下させた$solに",
                "$Sは「駄目か？　駄目なのか？」と悲しそうな目を向ける"),
            sol.talk("あのな", "旅ってのはひもじくて当然なんだよ。",
                "そりゃ偶にはご馳走にありつくってこともあるが",
                "長い旅を考えたらもしもって時の為に大事な金は取っとくのがだな……"),
            mako.talk("それじゃあ", "この仔牛のミルク煮込みと香草のサラダ",
                "あと生スライムの刺し身でいいですかね", "$taro？"),
            h.deal("見れば$Sの隣に座った$n_makoが彼女の$phoneを見せて何やら注文をしていた"),
            sol.talk("おいお前らちょっとは人の話を聞けよ！"),
            mako.talk("お金のことは心配いりませんよ。",
                "$meの口座から全部落としますし", "そもそもお父様から使い切れないくらい貰ってるんですって"),
            h.look("彼女に悪びれた様子はない"),
            sol.talk("いやだって$meたちお嬢に奢ってもらっても将来的に返せる当てねえぞ？"),
            yusha.talk("大丈夫だってよ$sol。", "だって$meたち", "魔王倒すから"),
            sol.talk("お前のその自信はどこからくんだよ"),
            h.deal("$solの大きな溜息を無視して", "$Sと$n_makoの二人は料理の注文を済ませたみたいだ"),
            yusha.talk("しかし$phoneって何でもできるんだな。", "これって例えば街道歩いている時とかでも注文できるの？"),
            mako.talk("配達可能地域ならできますよ？", "$meはいつも利用してますけど"),
            yusha.talk("じゃあ$phoneさえあれば食料持ってなくても楽勝じゃね？"),
            h.deal("感心した$Sは$n_makoに使い方を教わっていたが", "$solはそれがどうも気に食わないようだ。",
                    "ぼんやりと立ったまま三人のやり取りを眺めていた老婆を掴まえて", "こそっと耳打ちをする"),
            sol.talk("あの$phoneっての", "あんたは持ってないのか？"),
            uru.talk("初めて見ますねえ。", "あれは魔法具か何かなんですかえ？"),
            sol.talk("いや、いい。", "訊いた$meが悪かった。",
                    "それより婆さん。", "この村の傍にさ", "結構でっかい川が流れてるだろ？"),
            h.look("そう尋ねた$solを", "店主は目を大きくして見た"),
            sol.talk("だからさ", "川だよ川。", "東側をこうだーって南北に"),
            uru.talk("そんな大きな川がありましたら", "この村はもっと豊かでいられることでしょうが",
                    "生憎と水源と呼べるものは共用井戸くらいで", "後は遠くの$st_lake2まで水を汲みに行く必要がございます"),
            h.deal("それを聞いて固まったのは$solだけではなかった"),
            yusha.talk("ちょっとちょっと", "店主。", "今の話はマジ話《ばな》！？"),
            uru.talk("マジ……なんですかえ？"),
            mako.talk("確かに$gmapで見ると", "川はなくてその$st_lake2はありますね"),
            h.look("$n_makoは$Sに自分の$phoneを見せる。",
                    "空から見下ろして描いたような地図には$st_town3と$st_lake2の記載はあったが",
                    "川も森も見当たらないままだ。", "$st_lake2の周囲には森が広がっていたのに今はそこが砂漠と表示されている"),
            sol.talk("だからその地図が間違ってるだけじゃ……"),
            h.deal("そこまで口にしたところで$solも気づく"),
            sol.talk("いや", "地図は合ってんのか。", "婆さんの話と一致する"),
            yusha.talk("あれ？", "それじゃわざわざこっちに迂回しなくても良かったってこと？",
                    "一体どういうことなんだ？"),
            h.look("$Sはベッドに座りながら腕組みをした"),
            h.think("$st_homeregionの城下町を出て次の町$st_town2に行く為",
                    "$Sは一度街道沿いに北側の森を抜ける経路を選択した。",
                    "けれどその森で大量の$n_goblinに襲われた挙句", "気づいたら教会に戻っていた。",
                    "だから今度は奴らに遭遇しないで済むようわざわざ迂回路を選択したのだけれど",
                    "元の地図にあった川は無くなり", "すんなりとこの$st_town3村へとやってくることが出来た"),
            yusha.talk("けどあそこに森は無いって言われてる……"),
            h.deal("とそこに$n_makoの$phoneが軽快な音を鳴らした"),
            sol.talk("お、おい！", "何だよ今の音はよぉ！"),
            h.deal("咄嗟に飛び退いて背中の大剣に手を掛けたのは$solだ。",
                    "大柄な見た目にそぐわず臆病者らしい"),
            mako.talk("ただの$i_messageですよ"),
            h.deal("淡々とそう言って$n_makoは$phoneを見た"),
            mako.talk("え……"),
            yusha.talk("どうかした、$mako？"),
            mako.talk("それが……"),
            h.look("彼女は$Sを見て", "普段見せない真剣な表情になってこう言った"),
            mako.talk("今", "$st_town3村に配達員が到着したらしいんですけど……村そのものがないんですって"),
            h.think("え？"),
            h.deal("$Sはあまりの意味の分からなさに",
                    "自分の$phoneに向かって「宿屋なう」と呟いたのだった"),
            )

## ep30 scenes
def sc_notfound(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru = w.vilaman1, w.uru
    return w.scene("見つからない村",
            h.be(w.stage.town3, w.day.awake4),
            h.look("何とか$st_town3で宿を確保できた$Sたち一行は",
                "あることを確認する為に村の入り口へと戻ってきていた"),
            yusha.talk("やっぱ$meの頼んだ生スライムの刺し身がいない……"),
            h.look("$Sである少年は木の柵の向こう側に広がる荒野を覗き込みながら呟く"),
            sol.talk("いやその不味そうなもんは来なくていいけど",
                "ホントにその$phoneてので連絡取れるのかよ？", "$meはそっちのが疑わしいぜ"),
            h.look("赤い髪の後頭部を掻き毟りながら",
                "長身の$solはピンクのおかっぱ頭の少女を見た"),
            mako.talk("何言ってるんですか。",
                "あなたの頭よりよっぽど$phoneの方が信頼できます"),
            h.deal("魔法使いの少女、$n_makoは自分の$phoneを彼から隠すようにしながらそう言うと",
                "その黒い板に触れては「おかしいなあ」と繰り返す。",
                "やはり配達員からは既に$gmap上の$st_town3がある場所に到着したが",
                "村らしきものは何も見当たらないという$i_messageがあるらしい"),
            mako.talk("そもそも今$meたちって本当に$st_town3村にいるんでしょうか？"),
            yusha.talk("え？", "ここって$st_town3じゃないってこと？", "それならどこよ？"),
            h.deal("$Sは「さあ」と首を傾げる$n_makoを置いて",
                "近くを歩いていた男性に尋ねる"),
            yusha.talk("あのー", "ここって$st_town3村ですか？"),
            man.talk("そうだけど？", "あんたら旅の人か。",
                "ここには滅多と外部の人が来ないからなあ。", "観光資源も特産物もない。",
                "そんな場所に来る奴なんてただの物好きしかいないし仕方ねえけど"),
            h.look("ありがとうございました。",
                "と頭を下げて男を見送りながら",
                "やはり$n_makoと同じように小首を傾げながら$Sは$solを見やった"),
            sol.talk("だから言ってるだろ？",
                "その道具が間違ってるか何かだって。",
                "だいたい$meは最初から怪しいと思ってたんだよ。",
                "ちゃんと正規のルートで手に入れた最新の地図には川だって書いてあるのに",
                "$phoneの何とかって地図だと川がないとか森がないとかさ。",
                "そもそもそいつの地図が間違ってるって考えんのが妥当だろうよ？"),
            h.think("$solの言うことも尤もかも知れないと思った$Sだったが",
                "$st_town3そのものは紙の方の地図にも書かれている。",
                "$n_makoの方は$solの話を聞く気はないようで",
                "ずっと自分の$phoneを操作しながら何か唸っている"),
            yusha.talk("とりあえず生スライムは諦めてここで食べ物を探そうよ、$mako"),
            mako.talk("それじゃあ注文した分", "全部キャンセルしますけどいいですか？"),
            yusha.talk("え……"),
            h.deal("喉の奥で必死に拒否しようとしたが",
                "二人の視線を見て諦めることにした$Sは重々しく「うん」と返すと",
                "$n_makoはさらさらと自分の$phoneの上を何度かなぞった"),
            mako.talk("でもどうします？", "ここだと$smacache使えそうにないから現金払いになりますけど",
                "$me", "現金は全然持ってないんで"),
            yusha.talk("$smacache？"),
            mako.talk("$phoneを使って支払いができるんですよ。", "でもまだ普及し始めたばかりで都市部じゃないと使えないと思います"),
            h.deal("それでも文章や画像、地図を見るだけでなく",
                "お金まで扱えると知り",
                "$Sはますます$phoneというものに感心してしまった"),
            yusha.talk("$phoneって何でもできるんだな"),
            mako.talk("$i_makoword001"),
            h.deal("$n_makoと$Sは何かを確かめるように見つめ合うと",
                    "二人揃って村の中央部へ引き返そうと入り口のアーチに背を向ける"),
            sol.talk("あれ？", "何か来るぞ？", "生スライムか？"),
            yusha.talk("マジで！？"),
            h.look("村に向かってくる人影に気づいた$solの言葉で",
                    "$Sは一気に元気付く"),
            h.look("だがよく見ると走ってくる男は手ぶらで何も持っておらず",
                    "それどころかボロボロの服を身に着けて", "露出した体のあちこちに青痣があった"),
            sol.talk("どうしたんだよ", "あんた"),
            man.talk("と", "とにかく水を", "くれ"),
            yusha.talk("水だったら……"),
            h.deal("$Sは自分の腰に提げてあった皮の水筒を男に渡す。",
                    "男は感謝も言わないで必死に喉に流し込むと",
                    "荒い息をつきながら地面に這いつくばった"),
            sol.talk("おい", "大丈夫かよ？"),
            mako.talk("どうかしましたか？"),
            h.look("$solと$n_makoも心配して男を覗き込んだが", "男は首を横に振り",
                    "$Sの服の裾を掴んでこう訴えた"),
            man.talk("なんか知らんが突然大量の$n_goblinに襲われたんだ。",
                    "頼む！", "村長のところまで$myを連れてってくれ！"),
            h.deal("$n_goblinという言葉に$Sは$solと$n_makoの二人を見て", "苦笑を浮かべたのだった"),
            )

## ep31 scenes
def sc_gettrouble(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru, head = w.vilaman1, w.uru, w.town3head
    return w.scene("揉め事がやってきた",
            h.be(w.stage.town3, w.day.awake4),
            head.talk("ほお", "魔王退治の旅をしておるというのですか。",
                "一体何のことやらよく分かりませぬが", "よくぞこの$st_town3村においで下さった。",
                "その上", "怪我をした村の者を助けて下さったということで",
                "村民を代表して感謝しますぞ"),
            h.deal("村長の家も他の住居と同じく",
                "薄い板を貼り付けて造ったような粗末なものだった。",
                "その一室に案内された$Sと$sol", "$n_makoは土を焼いて作ったと思われる小さな湯呑みに入れられた水を前に",
                "それぞれ互いの目を確認し合う"),
            head.talk("実はですな。",
                "その者から話を聞きましたところ", "この村の北側に$n_goblinたちが大きな巣を作っていて",
                "$st_lake2に水汲みにも行けないと言うことでした"),
            yusha.talk("$n_goblinて巣作るの？"),
            h.deal("$Sは二人に尋ねたが", "$solは首を横に振る。そんな話は知らないらしい"),
            h.look("一方の$n_makoは自分の$phoneをじっと見ている"),
            head.talk("見てもらえば分かりますが", "$meら村の者たちは鍬や包丁を手にしたことはありますが",
                "剣を手に怪物と戦うといったことには長けておりません。",
                "そこで"),
            yusha.talk("あれ？", "これってひょっとして"),
            h.deal("黙って村長の話に聞き入っていた$Sは思わず声を上げる"),
            head.talk("あの", "どうかされましたか？"),
            yusha.talk("いえ。", "先を続けて下さい。", "お願いします"),
            h.deal("いつになくはっきりとした発音でそう言うと",
                "小さく首を傾げながらも村長は続けた"),
            head.talk("みなさん見たところ", "旅にも戦いにも慣れた方のようだ。",
                "どうでしょうか？",
                "みなさんで$n_goblinの巣を何とかし――"),
            sol.talk("お断りします"),
            yusha.talk("喜んで引き受けます！"),
            h.deal("やや食い気味で$solと$Sの返事が重なった"),
            sol.talk("ハァ！？", "$yusha何言ってんだよ。",
                "$n_goblinつったら一匹一匹は弱いけど徒党を組んで集団になって襲いかかられると一晩で小さな都市を滅ぼした",
                "なんて話もあるくらい面倒臭ぇやつらなんだぞ？"),
            yusha.talk("なーに言っちゃってくれちゃってるかな$sol君よ。",
                "これでも$meは$Sなんだよ。", "$yumarkこそ手元にないけど",
                "世界を救う$S認定を受けた正式な$Sだからね。",
                "困っている人がいたら助けるのは当然のことじゃないかな？"),
            h.deal("鼻を思い切り高くした感じで$Sは自分の腰に手を当てて立ち上がる"),
            yusha.talk("村長さん", "$n_goblin退治の件", "この私と仲間たちが引き受けてやりますよ。",
                "あいつら今度こそ全滅させてやるぞ！"),
            h.deal("一人だけ拳を強く握り締めると",
                "その手を村長に差し出して筋張った皺だらけの手と握手する"),
            sol.talk("おい何勝手なこと言ってんだよ？",
                "$yushaは今の$meの話聞いてたのか？"),
            mako.talk("この赤頭の話は別に聞かなくていいですけど",
                "今調べてみたら$n_goblinが巣を作っていたのは昔のことなんだそうです"),
            h.deal("立ち上がろうとした$solを押しのけると",
                "$n_makoは$Sの隣に行って自分の$phoneを見せながら説明する"),
            mako.talk("これ見て下さい"),
            yusha.talk("$wikipedia？"),
            h.look("$phoneにはずらりと$n_goblinの生態や習性", "その生物の歴史までかなり事細かに書かれている。",
                    "それはまるで$n_priest1神父から聞かされた王立図書館に収められている分厚い事典のようだと",
                    "$Sは思った"),
            mako.talk("この$wikipediaはこの世界のあらゆることが文章になっていると云われているものなんですけど",
                    "これの$n_goblinの項目を調べると",
                    "最近では昔のように巣を作ったりせずに$phoneを利用して必要な時だけ集まって強奪や殺戮を行う",
                    "ってあります"),
            yusha.talk("あいつらも$phone使うんだ……"),
            h.think("巣を作らなくなったことよりもそっちの方が$Sにとっては関心事項だった"),
            sol.talk("それじゃあお嬢", "今問題にしてる$n_goblinの巣ってのは古いタイプの$n_goblinがそこにいるのかも知れない",
                    "っつーことなのか？"),
            h.deal("$solはちらちらと彼女の$phoneを見るが", "懐疑的な目線で首を捻りながら$n_makoに尋ねる"),
            mako.talk("$phoneが普及し始めてまだ十年程度なんで", "ところによってはまだまだ古いタイプもいると思いますけど……"),
            sol.talk("けど何だよ？"),
            h.deal("その長身から見下された$n_makoは目線を逸して$Sを見つめながら", "こう続けた"),
            mako.talk("もし古いタイプだったとしたら", "今の$taroでは太刀打ちできません"),
            yusha.talk("え？　……マジですか"),
            mako.talk("マジです。", "旧タイプの$n_goblinの方が腕力が優れているんですよ。", "ほら"),
            h.deal("そう言って彼女は$phoneを操作して新世代と旧世代の$n_goblinの絵を見せた"),
            h.look("二つ横に並べられるとその違いがよく分かるのだが",
                    "まず肌の色が違う。", "旧世代の方が緑色が濃い。",
                    "新世代になるほど色が薄くなり中には黄色に見えるものもあった。",
                    "それから明らかに旧世代の方が筋肉質だ。",
                    "背も低く", "足も短い。",
                    "頭部はゴツゴツとして子鬼と呼ばれるのもよく分かる"),
            h.look("対して新世代はややつるりとして",
                    "旧世代と比較すると綺麗な肌になっている。",
                    "それから絵にしてあるだけなのかは分からないが", "新世代の方は服を着ている。",
                    "この村の人たちが着ているような縫製の荒いものだが",
                    "それでもちゃんと身につけて胸部や股間を隠している"),
            yusha.talk("これって本当に同じ$n_goblinなの？"),
            h.deal("$Sは思わず彼女に訊いたが", "$wikipediaに書いてあるから本当だと返された"),
            yusha.talk("……あいつらどっちかって言うと新世代に近い方だったのか"),
            sol.talk("何だよ$yusha。",
                    "$n_goblinに遭ったことあんのか？"),
            h.deal("$solに尋ねられ", "$Sは森で大量の$n_goblinに襲われた悪夢を思い出して首を思い切り左右に振った"),
            sol.talk("あん？", "よく分からねえな"),
            yusha.talk("なあ$mako。", "その$wikipediaってのに$n_goblinの弱点とか倒し方とか書いてないの？"),
            h.deal("引き受けたと言った手前", "今更退治やめますとも言えない。",
                    "$Sは何とかならないかと考えてみるのだが", "上手く一網打尽にする方法はないだろうかと必死に思案する"),
            head.talk("あのお……どうされましたか？"),
            h.deal("その気配に気づいたのだろうか。",
                    "村長が肩を寄せ合う三人に声を掛けた"),
            yusha.talk("いや大丈夫です。",
                    "少し準備がありますので", "一旦失礼します"),
            h.look("$Sはかしこまってそう答えると", "小さく礼をしてから",
                    "二人の手を取ってそそくさと村長宅を後にした"),
            h.move("家を出て宿の方へ足を向けながら", "$Sは思い切り肩を落とした"),
            yusha.talk("なあ", "このまま$n_goblin退治", "ドタキャンしちゃ駄目かな？"),
            h.look("そう苦笑を浮かべた$Sを見て", "二人は揃って溜息を零したのだった"),
            )

## ep32 scenes
def sc_gotonest(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru, head = w.vilaman1, w.uru, w.town3head
    return w.scene("ゴブリンの巣に行こう",
            h.be(w.stage.near_town3, w.day.awake4),
            h.explain("一晩$st_town3村のボロい宿で対策を考えた$Sたちだったが",
                "$n_goblinに対する有効な手段は準備するのが大変だと分かり",
                "ともかくまずは現地調査が必要だ", "という結論に落ち着いた"),
            yusha.talk("村の北側にとか言っても", "ざっくりしてるよなあ"),
            h.look("村を出た$Sたちは",
                "とりあえず川の跡に沿って北を目指してみた"),
            sol.talk("でもよ", "あの村の男の人", "よく一人で$n_goblinの群れから逃げ出して来られたよな。",
                "そのイキリなんとかっての？", "だと$n_goblinの巣に連れ込まれたら最後",
                "二度と生きては外に出られないだろうって書いてあっただろ？"),
            h.move("赤髪の戦士$solはその長身でがっしりとした体躯もあるが",
                "$Sたちよりも多めの荷物を持たされていた。",
                "持久戦になると困るからと村で大量の食料と水を買い込んだ所為だ"),
            mako.talk("$wikipediaです。", "$meたちが詳しく聞かなかっただけで",
                "何人か犠牲にして逃げてきたのかもしれませんよ？"),
            h.deal("ピンクのおかっぱ頭の上に先の尖った帽子を被りながら",
                "魔法使いの$n_makoは自身の$phoneを見ながら二人の後に付いて歩く。",
                "$phoneとは特殊な鉱石で作られた板状の道具で",
                "同じものを持った者同士で文章や絵をやり取りしたり",
                "知らないことを調べたりすることができた"),
            sol.talk("お嬢はときどき恐いこと言うよな。",
                "それじゃあ何か？",
                "もしこの三人で$n_goblinに捕まってたら誰かを餌に差し出して",
                "自分だけ逃げてきたって言うのか？"),
            mako.talk("そうなりますね"),
            h.deal("淡々と返事をした彼女に「マジかよ！？」と上半身を仰け反らせて$solは驚いたが",
                "その隣で$Sは自分の$phoneを見ながら$n_goblinに関連した呟きを探している"),
            h.look("検索というのだと$n_makoから教わったその技術は",
                "それぞれの$phoneによって投稿されている呟きから決まった言葉が含まれているものだけを見つけ出して",
                "ずらりと並べて表示してくれるという", "まるで妖精か何かがこの薄い板の中に棲んでいるんじゃないかと思ってしまうようなものだ"),
            h.look("見てみると結構いろいろな人が世界中で$n_goblinに遭遇しているらしく",
                "遠くから見て「$n_goblinなう」とか「$n_goblinマジぱねえっす」という呟きと共に集団で獣や人に襲いかかる姿を画像にしたものが投稿されていた。",
                "中には「$n_goblinに捕まったなう」というものまである"),
            yusha.talk("というか", "これって$meたちが今から行く場所じゃないか？"),
            mako.talk("え？", "ホントですか？"),
            h.look("$n_makoにもその呟きと画像を見せたが", "確かにその女性のいくつか前の呟きを確認すると$st_town3を朝早くに発っている。",
                "彼女の前には大量の旧世代$n_goblinが群がっていて", "その右側には川の跡らしきものが見えた"),
            yusha.talk("これって今の話だよね？",
                "だったら大変じゃないか！", "助けに行かなきゃ"),
            h.look("$Sは二人の顔を見て言う。", "$n_makoの方はすぐに賛成してくれたけれど",
                "$solはどうやら気が進まないらしい"),
            sol.talk("助けに行くとしてもさ", "何の準備もなしに行ったら結局$meたちも捕まって終わりじゃないのか？",
                "だったらこの女には悪いけど", "今日のところは巣の確認だけして対策考えつつ野営するしかないんじゃないか？"),
            h.think("確かに$solの言う通りになる可能性もあるから無闇に手助けすべきでないかも知れない。",
                "しかし少年は$Sであった。", "$yumarkはオークションで売り払ってしまったけれど"),
            yusha.talk("それじゃあ$solは彼女を見殺しにしろって言うのか？"),
            sol.talk("積極的にそうしろって言ってはない。",
                "ただ焦って救助に向かっても$meたちが被害者になるだけなんじゃねえかってことだよ"),
            h.deal("$Sは立ち止まり", "$solの顔をじっと見つめた"),
            sol.talk("んだよ？"),
            yusha.talk("積極的も何も", "こうしてる間にも彼女は$n_goblinにあーんなことやそーんなことまでされているかも知れないんだろ？",
                    "助けに行く前からうだうだ言っててもただ無駄に時間が過ぎるだけだから",
                    "とにかく$n_goblinの巣までは行ってみようって言ってんの"),
            h.deal("こいつには何言っても無駄だな",
                    "と顔を顰めて$Sを見返すと",
                    "$solは後頭部を掻きながら歩き出す"),
            sol.talk("まあ", "十匹くらいなら$me一人で相手にできないこともないし",
                    "いざとなったら$yushaだけ置いて逃げ出すから……別にいいぜ"),
            yusha.talk("マジかよ？",
                    "一人で勝手に行けとか言われたらどうしようかと思ってたわ。",
                    "いやあ何だかんだ$solって仲間思いだよな？"),
            h.deal("$Sはそんな$solに追いついて肩に腕を伸ばして首を抱くと",
                    "ほっとした思いでそう言った"),
            sol.talk("$yushaはいつも調子良すぎなんだよ", "ったく"),
            h.deal("$solが苦笑したのを受けて$Sは後ろの$n_makoを振り返って見たが",
                    "彼女も口元を押さえて笑っている"),
            h.think("ただ$solも$n_makoも知らなかった。",
                    "実は$Sが助けようと言ったその女性",
                    "彼女が自分を$phoneで撮影したその$i_selphyを見て", "$Sの非常に好みのタイプの金髪美女だったということを"),
            yusha.talk("よっしゃー！", "待ってて下さいよ！", "$n_goblinがなんぼのもんじゃーい！"),
            )

## ep33 scenes
def sc_findnest(w: wd.World):
    h = yusha = w.yusha
    sol, mako, yula = w.sol, w.mako, w.yula
    man, uru, head = w.vilaman1, w.uru, w.town3head
    return w.scene("ゴブリンの巣を見つけた",
            h.be(w.stage.near_town3, w.day.awake4),
            h.explain("$Sたち三人は川の跡を辿って北上し",
                "一路$n_goblinの巣を目指していた"),
            yusha.talk("あれ……"),
            sol.talk("どうかしたか$yusha？"),
            h.look("何かに気づいて立ち止まった$Sに", "先頭を歩いていた赤髪の長身の男$solが振り返って声を掛ける"),
            yusha.talk("いや", "こっから先、濡れてる"),
            h.look("確かに足元を見ると薄っすら地面が湿っている。",
                "それにもう少し先を見ると細い川になっていた"),
            mako.talk("どういうことでしょうか"),
            h.deal("ピンクのおかっぱ頭の$n_makoは自身の$phoneを向けてその画像を記録しながら",
                "二人を見る"),
            yusha.talk("やっぱりここって川が流れてたってことだよな？"),
            h.deal("深く掘られた地面には数日前まで確かに水の流れがあったと思わせる跡が付いている。",
                "それに角が削られた丸い石が沢山落ちていて", "拾い上げるとその下もしっとり濡れていた"),
            sol.talk("最近地震とか噴火とか大きな山崩れとかあったなんて話は聞いてねえしなあ"),
            yusha.talk("とにかく$n_goblinの巣がこの先にあるってことだろ？",
                "だったら行くしかない"),
            h.deal("$Sは腕組みをする$solと$phoneを見て考え込んでいる$n_makoに声を掛け",
                "先を急いだ"),
            w.tag.symbol("◆"),
            h.deal("足元を流れていた水は最初こそ小雨が降った後に生まれた小さな流れのような心許ない細さだったが",
                "それが徐々に太くなり", "やがて足首まで浸かりそうな深さになった"),
            h.look("そこまで来ると流石に川跡は避けて", "土手になった部分を上がったところで見下ろしながらの歩行となる"),
            sol.talk("あれ……なんじゃねえか？"),
            h.deal("上がってから程なくして", "$solが何かを見つけて声を上げた"),
            yusha.talk("どこ？"),
            sol.talk("だからこの川跡の先。", "なんか砦みたいなもんがある"),
            h.deal("山育ちの$solは目が良かった"),
            mako.talk("仕方ないですね。",
                "これでどうですか？"),
            h.deal("$n_makoは自分の$phoneをそちらに向けて画像に収めると",
                "板の上で中指と親指を開いてその画像を拡大する。",
                "すると切り出した丸太を組み上げ",
                "そこに粘土だろうか", "隙間を土で埋めて築かれた巨大な壁のような建造物が",
                "川の上にあるのが分かった"),
            h.look("しかもその壁のようなものの下から水が染み出して底の浅い川になっている"),
            sol.talk("これ……ダムってやつだろ"),
            yusha.talk("だむ？"),
            h.deal("拡大された$phoneの画像を見ながら$solが言ったが", "$Sは初めて耳にする言葉のようだった"),
            mako.talk("ダムってコレですよね？"),
            h.deal("すぐに$n_makoが$wikipediaを開いてそこのダムのページを表示する"),
            yusha.talk("治水や利水", "ごみ処理の為に川などを堰き止めて作る建造物……"),
            sol.talk("$meの村でも昔は大雨になる度に鉄砲水が出ててな",
                "それでも何とかって旅行者がダムを作ればいいって教えてくれて。",
                "村人総出で百日くらい掛かったそうだが", "ダムが出来てからはかなり水の被害は減ったぜ"),
            yusha.talk("じゃあアレって$n_goblinの巣じゃなくてダムってこと？"),
            h.deal("$Sも自分の$phoneでその建造物を画像にしてから拡大してみる"),
            yusha.talk("あ……"),
            h.look("するとその建造物の左側の一部に三匹の$n_goblinと思われる小さな人影と",
                    "そいつらに担ぎ上げられている金髪の女性が", "そこには映っていた"),
            yusha.talk("おいコレ！"),
            h.deal("$Sは慌てて他の二人にもそれを見せるが",
                    "どちらも間違いなく$phoneで捕まったと呟いていた人だろうと答えた"),
            # NOTE: 助けに向かって、囲まれる、代わりにmakoが攫われる
            )

# episodes
def ep25(w: wd.World):
    return (w.chaptertitle(TITLE[0]),
            sc_churchagain4(w),
            sc_avoidgoblin(w),
            )

def ep26(w: wd.World):
    return (w.chaptertitle(TITLE[1]),
            sc_vanishriver(w),
            sc_gogonmap(w),
            )

def ep27(w: wd.World):
    return (w.chaptertitle(TITLE[2]),
            sc_vila(w),
            sc_strangerumor(w),
            )

def ep28(w: wd.World):
    return (w.chaptertitle(TITLE[3]),
            sc_vilainn(w),
            )

def ep29(w: wd.World):
    return (w.chaptertitle(TITLE[4]),
            sc_takeainn(w),
            )

def ep30(w: wd.World):
    return (w.chaptertitle(TITLE[5]),
            sc_notfound(w),
            )

def ep31(w: wd.World):
    return (w.chaptertitle(TITLE[6]),
            sc_gettrouble(w),
            )

def ep32(w: wd.World):
    return (w.chaptertitle(TITLE[7]),
            sc_gotonest(w),
            )

def ep33(w: wd.World):
    return (w.chaptertitle(TITLE[8]),
            sc_findnest(w),
            )

# outline
def story_baseinfo(w: wd.World):
    return [
            ]

def story_outline(w: wd.World):
    return [
            ]

# main
def story(w: wd.World):
    return (w.maintitle(cnf.TITLE["chap3"]),
            ep25(w),
            ep26(w),
            ep27(w),
            ep28(w),
            ep29(w),
            ep30(w),
            ep31(w),
            ep32(w),
            ep33(w),
            )

def main(): # pragma: no cover
    from src.yunow.story import world
    w = world()
    return w.build(story(w))


if __name__ == '__main__':
    import sys
    sys.exit(main())

